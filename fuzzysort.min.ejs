// https://github.com/farzher/fuzzysort v3.1.1
const fuzzysort=(()=>{"use strict";var f=r=>{"number"==typeof r?r=""+r:"string"!=typeof r&&(r="");var e=s(r);return G(r,{t:e.i,o:e.v,u:e.l})};class x{get["indexes"](){return this.p.slice(0,this.p.g).sort((r,e)=>r-e)}set["indexes"](r){return this.p=r}["highlight"](r,e){for(var[r,f="<b>",t="</b>"]=[this,r,e],i="function"==typeof f?f:void 0,a=r.target,o=a.length,n=r.indexes,v="",s=0,u=0,l=!1,c=[],p=0;p<o;++p){var b=a[p];if(n[u]===p){if(++u,l||(l=!0,i?(c.push(v),v=""):v+=f),u===n.length){i?(c.push(i(v+=b,s++)),v="",c.push(a.substr(p+1))):v+=b+t+a.substr(p+1);break}}else l&&(l=!1,i?(c.push(i(v,s++)),v=""):v+=t);v+=b}return i?c:v}get["score"](){return e(this.h)}set["score"](r){this.h=H(r)}}class E extends Array{get["score"](){return e(this.h)}set["score"](r){this.h=H(r)}}var o,n,r,t,G=(r,e)=>{var f=new x;return f.target=r,f.obj=e.obj??Y,f.h=e.h??W,f.p=e.p??[],f.t=e.t??"",f.o=e.o??Y,f.k=e.k??Y,f.u=e.u??0,f},e=r=>r===W?0:1<r?r:Math.E**(-2*((1-r)**.04307-1)),H=r=>0===r?W:1<r?r:1-Math.pow(Math.log(r)/-2+1,1/.04307),i=r=>{"number"==typeof r?r=""+r:"string"!=typeof r&&(r=""),r=r.trim();var e=s(r),f=[];if(e.S)for(var t,i=r.split(/\s+/),i=[...new Set(i)],a=0;a<i.length;a++)""!==i[a]&&(t=s(i[a]),f.push({v:t.v,i:i[a].toLowerCase(),S:!1}));return{v:e.v,i:e.i,S:e.S,l:e.l,_:f}},I=r=>{var e;return 999<r.length?f(r):(void 0===(e=a.get(r))&&(e=f(r),a.set(r,e)),e)},J=r=>{var e;return 999<r.length?i(r):(void 0===(e=u.get(r))&&(e=i(r),u.set(r,e)),e)},K=(r,e,f=!1,t=!1)=>{if(!1===f&&r.S)return z(r,e,t);for(var f=r.i,i=r.v,a=i[0],o=e.o,n=i.length,v=o.length,s=0,u=0,l=0;;){if(a===o[u]){if(m[l++]=u,++s===n)break;a=i[s]}if(v<=++u)return Y}var s=0,c=!1,p=0,b=e.k,w=(b===Y&&(b=e.k=C(e.target)),0);if((u=0===m[0]?0:b[m[0]-1])!==v)for(;;)if(v<=u){if(s<=0)break;if(200<++w)break;--s;var g=A[--p],u=b[g]}else if(i[s]===o[u]){if(A[p++]=u,++s===n){c=!0;break}++u}else u=b[u];var h=n<=1?-1:e.t.indexOf(f,m[0]),d=!!~h,y=d&&(0===h||e.k[h-1]===h);if(d&&!y)for(var k=0;k<b.length;k=b[k])if(!(k<=h)){for(var S=0;S<n&&i[S]===e.o[k+S];S++);if(S===n){h=k,y=!0;break}}t=r=>{for(var e=0,f=0,t=1;t<n;++t)r[t]-r[t-1]!=1&&(e-=r[t],++f);if(e-=(12+(r[n-1]-r[0]-(n-1)))*f,0!==r[0]&&(e-=r[0]*r[0]*.2),c){for(var i=1,t=b[0];t<v;t=b[t])++i;24<i&&(e*=10*(i-24))}else e*=1e3;return e-=(v-n)/2,d&&(e/=1+n*n*1),y&&(e/=1+n*n*1),e-=(v-n)/2};if(c)if(y){for(k=0;k<n;++k)m[k]=h+k;_=m,M=t(m)}else _=A,M=t(A);else{if(d)for(var k=0;k<n;++k)m[k]=h+k;var _,M=t(_=m)}e.h=M;for(k=0;k<n;++k)e.p[k]=_[k];e.p.g=n;r=new x;return r.target=e.target,r.h=e.h,r.p=e.p,r},z=(r,e,f)=>{for(var t=new Set,i=0,a=Y,o=0,n=r._,v=n.length,s=0,u=()=>{for(let r=s-1;0<=r;r--)e.k[S[2*r+0]]=S[2*r+1]},l=!1,c=0;c<v;++c){P[c]=W;var p=n[c],a=K(p,e);if(f){if(a===Y)continue;l=!0}else if(a===Y)return u(),Y;if(!(c===v-1)){var b=a.p,w=!0;for(let r=0;r<b.g-1;r++)if(b[r+1]-b[r]!=1){w=!1;break}if(w){var g=b[b.g-1]+1,h=e.k[g-1];for(let r=g-1;0<=r&&h===e.k[r];r--)e.k[r]=g,S[2*s+0]=r,S[2*s+1]=h,s++}}i+=a.h/v,P[c]=a.h/v,a.p[0]<o&&(i-=2*(o-a.p[0]));for(var o=a.p[0],d=0;d<a.p.g;++d)t.add(a.p[d])}if(f&&!l)return Y;u();var y=K(r,e,!0);if(y!==Y&&y.h>i){if(f)for(c=0;c<v;++c)P[c]=y.h/v;return y}(a=f?e:a).h=i;var k,c=0;for(k of t)a.p[c++]=k;return a.p.g=c,a},v=r=>r.replace(/\p{Script=Latin}+/gu,r=>r.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),s=r=>{for(var e=(r=v(r)).length,f=r.toLowerCase(),t=[],i=0,a=!1,o=0;o<e;++o){var n=t[o]=f.charCodeAt(o);32===n?a=!0:i|=1<<(97<=n&&n<=122?n-97:48<=n&&n<=57?26:n<=127?30:31)}return{v:t,l:i,S:a,i:f}},C=r=>{for(var e=(r=v(r)).length,f=(r=>{for(var e=r.length,f=[],t=0,i=!1,a=!1,o=0;o<e;++o){var n=r.charCodeAt(o),v=65<=n&&n<=90,n=v||97<=n&&n<=122||48<=n&&n<=57,s=v&&!i||!a||!n,i=v,a=n;s&&(f[t++]=o)}return f})(r),t=[],i=f[0],a=0,o=0;o<e;++o)o<i?t[o]=i:(i=f[++a],t[o]=void 0===i?e:i);return t},a=new Map,u=new Map,m=[],A=[],S=[],O=[],P=[],Q=[],R=[],T=(r,e)=>{var f=r[e];if(void 0!==f)return f;if("function"==typeof e)return e(r);for(var t=e,i=(t=Array.isArray(e)?t:e.split(".")).length,a=-1;r&&++a<i;)r=r[t[a]];return r},U=r=>"object"==typeof r&&"number"==typeof r.u,V=1/0,W=-V,X=[],Y=(X.total=0,null),Z=f(""),$=(o=[],n=0,t=r=>{for(var e=o[i=0],f=1;f<n;){var t=f+1,i=f;t<n&&o[t].h<o[f].h&&(i=t),o[i-1>>1]=o[i],f=1+(i<<1)}for(var a=i-1>>1;0<i&&e.h<o[a].h;a=(i=a)-1>>1)o[i]=o[a];o[i]=e},(r={}).add=r=>{var e=n;o[n++]=r;for(var f=e-1>>1;0<e&&r.h<o[f].h;f=(e=f)-1>>1)o[e]=o[f];o[e]=r},r.M=r=>{var e;if(0!==n)return e=o[0],o[0]=o[--n],t(),e},r.C=r=>{if(0!==n)return o[0]},r.m=r=>{o[0]=r,t()},r);return{single:(r,e)=>{var f;return!r||!e||(r=J(r),U(e)||(e=I(e)),((f=r.l)&e.u)!==f)?Y:K(r,e)},go:(r,e,f)=>{if(!r)if(f?.all){var t=e;var i=f;var a=[],o=(a.total=t.length,i?.limit||V);if(i?.key)for(var n=0;n<t.length;n++){var v=t[n];var s=T(v,i.key);if(s==Y)continue;if(!U(s))s=I(s);var u=G(s.target,{h:s.h,obj:v});a.push(u);if(a.length>=o)return a}else if(i?.keys)for(n=0;n<t.length;n++){v=t[n];var l=new E(i.keys.length);for(var c=i.keys.length-1;c>=0;--c){s=T(v,i.keys[c]);if(!s){l[c]=Z;continue}if(!U(s))s=I(s);s.h=W;s.p.g=0;l[c]=s}l.obj=v;l.h=W;a.push(l);if(a.length>=o)return a}else for(n=0;n<t.length;n++){s=t[n];if(s==Y)continue;if(!U(s))s=I(s);s.h=W;s.p.g=0;a.push(s);if(a.length>=o)return a}return a;return}else return X;var p=J(r),b=p.l,w=p.S,g=H(f?.threshold||0),h=f?.limit||V,d=0,y=0,k=e.length;function S(r){d<h?($.add(r),++d):(++y,r.h>$.C().h&&$.m(r))}if(f?.key)for(var _=f.key,M=0;M<k;++M){var x=e[M];!(N=T(x,_))||(b&(N=U(N)?N:I(N)).u)!==b||(q=K(p,N))===Y||q.h<g||(q.obj=x,S(q))}else if(f?.keys){var z=f.keys,C=z.length;r:for(M=0;M<k;++M){for(var x=e[M],m=0,A=0;A<C;++A){_=z[A];(N=T(x,_))?(U(N)||(N=I(N)),m|=(Q[A]=N).u):Q[A]=Z}if((b&m)===b){if(w)for(let r=0;r<p._.length;r++)O[r]=W;for(A=0;A<C;++A)if((N=Q[A])===Z)R[A]=Z;else if(R[A]=K(p,N,!1,w),R[A]===Y)R[A]=Z;else if(w)for(let r=0;r<p._.length;r++)-1e3<P[r]&&O[r]>W&&(F=(O[r]+P[r])/4)>O[r]&&(O[r]=F),P[r]>O[r]&&(O[r]=P[r]);if(w){for(let r=0;r<p._.length;r++)if(O[r]===W)continue r}else{var L=!1;for(let r=0;r<C;r++)if(R[r].h!==W){L=!0;break}if(!L)continue}var j=new E(C);for(let r=0;r<C;r++)j[r]=R[r];if(w){var D=0;for(let r=0;r<p._.length;r++)D+=O[r]}else{var F,D=W;for(let r=0;r<C;r++)-1e3<(q=j[r]).h&&W<D&&D<(F=(D+q.h)/4)&&(D=F),q.h>D&&(D=q.h)}if(j.obj=x,j.h=D,f?.scoreFn){if(!(D=f.scoreFn(j)))continue;D=H(D),j.h=D}D<g||S(j)}}}else for(var N,q,M=0;M<k;++M)!(N=e[M])||(b&(N=U(N)?N:I(N)).u)!==b||(q=K(p,N))===Y||q.h<g||S(q);if(0===d)return X;for(var B=new Array(d),M=d-1;0<=M;--M)B[M]=$.M();return B.total=d+y,B},prepare:f,cleanup:()=>{a.clear(),u.clear()}}})();export default fuzzysort;